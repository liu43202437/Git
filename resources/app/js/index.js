"use strict";$(function(){var e,a,n={sid:"",phone:"",idNumber:"",code:"",realName:""},s=!1;n.sid=(e=new RegExp("(^|&)"+"sid"+"=([^&]*)(&|$)"),null!=(a=window.location.search.substr(1).match(e))?unescape(a[2]):null);var l=/^[\u4e00-\u9fa5]{2,4}$/,r=$(".name-txt"),o=$(".name");r.focus(function(){o.children("span").removeClass("glyphicon-remove red glyphicon-ok green")}),r.blur(function(){l.test(r.val())?(o.children("span").addClass("glyphicon-ok green"),n.realName=r.val(),s=!0):(o.children("span").addClass("glyphicon-remove red"),s=!1)});var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,d=$(".id-num"),c=$(".id-number");d.blur(function(){t.test(d.val())?(c.children("span").addClass("glyphicon-ok green"),n.idNumber=d.val(),s=!0):(c.children("span").addClass("glyphicon-remove red"),s=!1)}),d.focus(function(){c.children("span").removeClass("glyphicon-remove red glyphicon-ok green")});var i=/^1[34578]\d{9}$/,u=!1,p=$(".phone-num"),v=$(".msgs");p.on("input propertychange",function(){v.text("点击获取验证码"),i.test($(this).val())?(v.removeClass("disable-btn").addClass("able-btn"),u=!0,n.phone=p.val()):(v.removeClass("able-btn").addClass("disable-btn"),u=!1)}),v.click(function(){u&&$.ajax({url:HOST+"/mobile/wechat/ajaxSend",type:"POST",timeout:5e3,dataType:"json",data:{mobile:n.phone},success:function(e){if(e.success)var a=30,n=window.setInterval(function(){v.text(a+"s后重新获取"),--a<0&&(v.text("获取验证码"),v.prop("disabled",!1),window.clearInterval(n))},1e3);else v.prop("disabled",!1)},error:function(e){v.prop("disabled",!1)}})});var h=$(".msg-num");console.log(n),$("#sub-btn-user").click(function(){6===h.val().length&&s?(n.code=h.val(),$.ajax({type:"POST",url:HOST+"/mobile/wechat/addUser",data:n,datatype:"json",success:function(e){(e=JSON.parse(e)).status.succeed&&!e.status.error_code?(alert("注册成功！"),r.val(""),d.val(""),p.val(""),h.val("")):alert("注册失败，请检查信息！"+e.status.error_desc)},error:function(e){alert("注册失败，请检查网络！"+e)}})):alert("输入有误，请重新输入！")})});