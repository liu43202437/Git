"use strict";$(function(t){var a,e,n=(a=new RegExp("(^|&)"+"sid"+"=([^&]*)(&|$)"),null!=(e=t.location.search.substr(1).match(a))?unescape(e[2]):null),s=$(".point-list .list-body");$(".all_point").text(0),$(".today_point").text(0),api("getCreditsByManager",{sid:n}).then(function(t){1===(t=JSON.parse(t)).status.succeed&&t.data&&($(".all_point").text(""+t.data.total),$(".today_point").text(""+(t.data.dayTotal?"+ "+t.data.dayTotal:0)),$(".today_pay").text(""+(t.data.expend?"- "+t.data.expend:0)))}).catch(function(t){console.log(t),swal({button:"关闭",text:"公益分详情获取失败"})});var i=$(".nav-item.nav-active").data("state"),d={type:i,sid:n,entryNum:20,loadmore:!1};function l(t){api("get_credits_detail",t).then(function(a){a=JSON.parse(a),t.loadmore||s.html(""),1===a.status.succeed&&(a.data&&a.data.list?(checkLoadMore(a.data.list.length,a.data.length,l,!0),function(t,a,e){if($(".nav-item.nav-active").data("state")!==e)return;for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case 1:var i='\n        <div class="list-item-title f-12"><i class="iconfont icon-indent1 f-12 text-yellow"></i> 订单公益分</div>\n        <div class="list-item d-flex justify-content-between align-items-center">\n        <div>\n          <div class="text-gray-65 d-flex align-items-center"><span>订单号：</span> <span>'+s.trade_no+'</span></div>\n          <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span> </div>\n        </div>\n        <div class="text-gray-45"><span class="f-20 text-red">+'+s.credits+"</span></div>\n      </div>\n        ";a.append(i);break;case 2:var i='\n        <div class="list-item-title f-12"><i class="iconfont icon-shop f-12 text-blue"></i> 客户经理公益分</div>\n        <div class="list-item d-flex justify-content-between align-items-center">\n        <div>\n          <div class="text-gray-65 d-flex align-items-center"><span>店主姓名：</span> <span>'+s.name+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>店铺地址：</span><span>'+s.address+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span> </div>\n        </div>\n        <div class="text-gray-45"><span class="f-20 text-red">+'+s.credits+"</span></div>\n      </div>\n        ";a.append(i);break;case 3:var i='\n        <div class="list-item d-flex justify-content-between align-items-center pt-10">\n          <div>\n            <div class="text-gray-65 d-flex align-items-center"><span>订单号：</span> <span>'+s.trade_no+'</span></div>\n            <div class="text-gray-45 d-flex align-items-center"><span>兑换：</span><span>'+s.product_title+" x"+s.num+'</span></div>\n            <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span></div>\n          </div>\n          <div class="text-gray-45"><span class="f-20 text-gray-65">-'+s.credits+"</span></div>\n        </div>\n        ";a.append(i);break;case 4:var i='\n        <div class="list-item-title f-12"><i class="iconfont icon-shop f-12 text-green"></i> 市场经理公益分</div>\n        <div class="list-item d-flex justify-content-between align-items-center">\n        <div>\n          <div class="text-gray-65 d-flex align-items-center"><span>客户经理姓名：</span> <span>'+s.name+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span> </div>\n        </div>\n        <div class="text-gray-45"><span class="f-20 text-red">+'+s.credits+"</span></div>\n      </div>\n        ";a.append(i);break;case 5:var i='\n        <div class="list-item-title f-12"><i class="iconfont icon-shop f-12 text-green"></i> 区域经理公益分</div>\n        <div class="list-item d-flex justify-content-between align-items-center">\n        <div>\n          <div class="text-gray-65 d-flex align-items-center"><span>市场经理姓名：</span> <span>'+s.name+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span> </div>\n        </div>\n        <div class="text-gray-45"><span class="f-20 text-red">+'+s.credits+"</span></div>\n      </div>\n        ";a.append(i);break;case 6:var i='\n      <div class="list-item-title f-12"><i class="iconfont icon-shop f-12 text-green"></i> 客户经理公益分</div>\n        <div class="list-item d-flex justify-content-between align-items-center">\n        <div>\n          <div class="text-gray-65 d-flex align-items-center"><span>店主姓名：</span> <span>'+s.name+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>店铺地址：</span><span>'+s.address+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span> </div>\n        </div>\n        <div class="text-gray-45"><span class="f-20 text-red">+'+s.credits+"</span></div>\n      </div>\n      ";a.append(i);break;case 7:var i='\n      <div class="list-item-title f-12"><i class="iconfont icon-shop f-12 text-green"></i> 客户经理公益分</div>\n        <div class="list-item d-flex justify-content-between align-items-center">\n        <div>\n          <div class="text-gray-65 d-flex align-items-center"><span>姓名：</span> <span>'+s.name+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>店铺地址：</span><span>'+s.address+'</span> </div>\n          <div class="text-gray-45 d-flex align-items-center"><span>时间：</span><span>'+s.update_date+'</span> </div>\n        </div>\n        <div class="text-gray-45"><span class="f-20 text-red">+'+s.credits+"</span></div>\n      </div>\n      ";a.append(i)}}}(a.data.list,s,a.data.type)):a.data&&!a.data.length&&checkLoadMore([],0,null,!0))}).catch(function(t){swal({button:"关闭",text:"公益分详情列表获取失败"})})}l(d=loadMoreInit(d)),$(".nav-box .nav-item").click(function(t){var a=$(t.target);if(i!==a.data("state")){s.html(""),$(".nav-item.nav-active").removeClass("nav-active"),a.addClass("nav-active");var e={type:i=a.data("state"),sid:n,entryNum:20,loadmore:!1};l(e=loadMoreInit(e))}}),t.active_menu="point",t.sid=n}(window));