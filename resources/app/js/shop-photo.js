"use strict";var $event,timeOutEvent=null,selecteImgs=[],imgData=[];function getImgData(){updateImgList(imgData=[{id:0,src:"images/test.png"}])}function updateImgList(e){var t="",a=!0,o=!1,n=void 0;try{for(var i,r=imgData[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var s=i.value;t+='\n    <div data-id="'+s.id+'" class="zoomImage">\n      <img class="img-position" src="'+s.src+'" alt="">\n      <div class="modal-box">\n        <div class="mycheck box-position">\n          <input type="checkbox">\n          <label></label>\n        </div>\n      </div>\n    </div>\n    '}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}$(".photo-box").html(t)}function longPress(){$($event.currentTarget).find(".zoomImage>.modal-box").each(function(e,t){$(t).addClass("show")}),selectedImg($($event.target).find(".modal-box").get(0)),$(".footer").removeClass("hidden"),$(".upload-box").addClass("hidden"),clearTimeout(timeOutEvent),timeOutEvent=null}function selectedImg(e){$(e).is("input[type='checkbox']")&&($(e).prop("checked")?$(e).parent().parent().removeClass("selected"):$(e).parent().parent().addClass("selected"))}getImgData(),$(".upload-box").click(function(){wx.chooseImage({count:3,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var t=e.localIds,a=!0,o=!1,n=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var s=i.value,l=imgData.length;imgData.push({src:s,id:l})}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}updateImgList(imgData)}})}),$(".photo-box").on({touchstart:function(e){$event=e,$(e.target).hasClass("show")||$(e.target).parent().parent().hasClass("show")?selectedImg(e.target):timeOutEvent=setTimeout(longPress,500)},touchmove:function(){clearTimeout(timeOutEvent),timeOutEvent=null},touchend:function(e){if(timeOutEvent){var t=e.target.src,a=[],o=!0,n=!1,i=void 0;try{for(var r,s=imgData[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var l=r.value;a.push(l.src)}}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}wx.previewImage({current:t,urls:a})}clearTimeout(timeOutEvent),timeOutEvent=null}}),$(".js-delete").click(function(){selecteImgs=[],$(".zoomImage>.modal-box").each(function(e,t){if($(t).removeClass("show"),$(t).find("input[type='checkbox']").prop("checked")){var a=$(t).parent().data("id");selecteImgs.push(a)}$(".footer").addClass("hidden"),$(".upload-box").removeClass("hidden")});var e=!0,t=!1,a=void 0;try{for(var o,n=selecteImgs[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var i=o.value;imgData.splice(i,1)}}catch(e){t=!0,a=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw a}}updateImgList(imgData)}),$(".js-cancel").click(function(){$(".zoomImage>.modal-box").each(function(e,t){$(t).removeClass("show"),$(t).removeClass("selected"),$(t).find("input[type='checkbox']").prop("checked",!1),$(".footer").addClass("hidden"),$(".upload-box").removeClass("hidden")})});